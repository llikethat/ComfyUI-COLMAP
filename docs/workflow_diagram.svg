<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="colmapGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="samGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="combineGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="exportGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#dc2626;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#1a1a2e"/>
  
  <!-- Title -->
  <text x="600" y="45" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="28" font-weight="bold">ComfyUI-COLMAP Pipeline</text>
  <text x="600" y="75" text-anchor="middle" fill="#9ca3af" font-family="Arial, sans-serif" font-size="14">Camera Tracking + Body Mesh Integration</text>
  
  <!-- Section Labels -->
  <text x="100" y="120" fill="#60a5fa" font-family="Arial, sans-serif" font-size="12" font-weight="bold">INPUT</text>
  <text x="280" y="120" fill="#fbbf24" font-family="Arial, sans-serif" font-size="12" font-weight="bold">COLMAP PIPELINE</text>
  <text x="280" y="470" fill="#a78bfa" font-family="Arial, sans-serif" font-size="12" font-weight="bold">SAM3DBODY (OPTIONAL)</text>
  <text x="750" y="120" fill="#34d399" font-family="Arial, sans-serif" font-size="12" font-weight="bold">PROCESSING</text>
  <text x="1000" y="120" fill="#f87171" font-family="Arial, sans-serif" font-size="12" font-weight="bold">OUTPUT</text>

  <!-- Input Node: VHS Load Video -->
  <g filter="url(#shadow)">
    <rect x="50" y="250" width="160" height="80" rx="8" fill="url(#inputGrad)"/>
    <text x="130" y="280" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ“¹ VHS Load Video</text>
    <text x="130" y="300" text-anchor="middle" fill="#bfdbfe" font-family="Arial, sans-serif" font-size="10">Load video frames</text>
    <text x="130" y="318" text-anchor="middle" fill="#93c5fd" font-family="Arial, sans-serif" font-size="9">â†’ IMAGE batch</text>
  </g>

  <!-- Arrow from Input to COLMAP -->
  <path d="M 210 270 L 260 200" stroke="#60a5fa" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
  <path d="M 210 310 L 260 380" stroke="#60a5fa" stroke-width="2" fill="none"/>
  
  <!-- COLMAP Pipeline Nodes -->
  <!-- Feature Extractor -->
  <g filter="url(#shadow)">
    <rect x="270" y="140" width="180" height="90" rx="8" fill="url(#colmapGrad)"/>
    <text x="360" y="168" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ¯ Feature Extractor</text>
    <text x="360" y="188" text-anchor="middle" fill="#fef3c7" font-family="Arial, sans-serif" font-size="9">SIFT / SIFT_GPU</text>
    <text x="360" y="205" text-anchor="middle" fill="#fde68a" font-family="Arial, sans-serif" font-size="9">max_features: 8192</text>
    <text x="360" y="222" text-anchor="middle" fill="#fcd34d" font-family="Arial, sans-serif" font-size="9">â†’ COLMAP_DATABASE</text>
  </g>

  <!-- Arrow -->
  <path d="M 450 185 L 480 185" stroke="#fbbf24" stroke-width="2" fill="none"/>
  <polygon points="480,185 472,181 472,189" fill="#fbbf24"/>

  <!-- Feature Matcher -->
  <g filter="url(#shadow)">
    <rect x="490" y="140" width="180" height="90" rx="8" fill="url(#colmapGrad)"/>
    <text x="580" y="168" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ”— Feature Matcher</text>
    <text x="580" y="188" text-anchor="middle" fill="#fef3c7" font-family="Arial, sans-serif" font-size="9">exhaustive / sequential</text>
    <text x="580" y="205" text-anchor="middle" fill="#fde68a" font-family="Arial, sans-serif" font-size="9">vocab_tree</text>
    <text x="580" y="222" text-anchor="middle" fill="#fcd34d" font-family="Arial, sans-serif" font-size="9">â†’ COLMAP_DATABASE</text>
  </g>

  <!-- Arrow -->
  <path d="M 580 230 L 580 260" stroke="#fbbf24" stroke-width="2" fill="none"/>
  <polygon points="580,260 576,252 584,252" fill="#fbbf24"/>

  <!-- Sparse Reconstructor -->
  <g filter="url(#shadow)">
    <rect x="490" y="270" width="180" height="90" rx="8" fill="url(#colmapGrad)"/>
    <text x="580" y="298" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ—ï¸ Sparse Reconstructor</text>
    <text x="580" y="318" text-anchor="middle" fill="#fef3c7" font-family="Arial, sans-serif" font-size="9">Incremental SfM</text>
    <text x="580" y="335" text-anchor="middle" fill="#fde68a" font-family="Arial, sans-serif" font-size="9">min_matches: 15</text>
    <text x="580" y="352" text-anchor="middle" fill="#fcd34d" font-family="Arial, sans-serif" font-size="9">â†’ COLMAP_RECONSTRUCTION</text>
  </g>

  <!-- OR Divider -->
  <text x="360" y="280" text-anchor="middle" fill="#9ca3af" font-family="Arial, sans-serif" font-size="12" font-weight="bold">â€” OR â€”</text>

  <!-- Auto Reconstruct (Alternative) -->
  <g filter="url(#shadow)">
    <rect x="270" y="300" width="180" height="70" rx="8" fill="url(#colmapGrad)" stroke="#ffffff" stroke-width="2" stroke-dasharray="4"/>
    <text x="360" y="325" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸš€ Auto Reconstruct</text>
    <text x="360" y="345" text-anchor="middle" fill="#fef3c7" font-family="Arial, sans-serif" font-size="9">All-in-one node</text>
    <text x="360" y="362" text-anchor="middle" fill="#fcd34d" font-family="Arial, sans-serif" font-size="9">â†’ CAMERA_DATA</text>
  </g>

  <!-- SAM3DBody Pipeline -->
  <g filter="url(#shadow)">
    <rect x="270" y="490" width="180" height="80" rx="8" fill="url(#samGrad)"/>
    <text x="360" y="518" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ§ SAM3DBody Processor</text>
    <text x="360" y="538" text-anchor="middle" fill="#e9d5ff" font-family="Arial, sans-serif" font-size="9">Body mesh extraction</text>
    <text x="360" y="555" text-anchor="middle" fill="#c4b5fd" font-family="Arial, sans-serif" font-size="9">â†’ MESH_SEQUENCE</text>
  </g>

  <!-- Arrow from input to SAM3D -->
  <path d="M 210 310 L 240 530 L 270 530" stroke="#60a5fa" stroke-width="2" fill="none"/>
  <polygon points="270,530 262,526 262,534" fill="#60a5fa"/>

  <!-- Camera Extractor -->
  <g filter="url(#shadow)">
    <rect x="710" y="140" width="180" height="90" rx="8" fill="url(#combineGrad)"/>
    <text x="800" y="168" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ“· Camera Extractor</text>
    <text x="800" y="188" text-anchor="middle" fill="#d1fae5" font-family="Arial, sans-serif" font-size="9">Coordinate system:</text>
    <text x="800" y="205" text-anchor="middle" fill="#a7f3d0" font-family="Arial, sans-serif" font-size="9">blender/unreal/unity...</text>
    <text x="800" y="222" text-anchor="middle" fill="#6ee7b7" font-family="Arial, sans-serif" font-size="9">â†’ CAMERA_DATA</text>
  </g>

  <!-- Arrow from Sparse to Camera Extractor -->
  <path d="M 670 315 L 690 315 L 690 185 L 710 185" stroke="#fbbf24" stroke-width="2" fill="none"/>
  <polygon points="710,185 702,181 702,189" fill="#fbbf24"/>

  <!-- Motion Analyzer -->
  <g filter="url(#shadow)">
    <rect x="710" y="270" width="180" height="110" rx="8" fill="url(#combineGrad)"/>
    <text x="800" y="298" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ“Š Motion Analyzer</text>
    <text x="800" y="318" text-anchor="middle" fill="#d1fae5" font-family="Arial, sans-serif" font-size="9">Pan / Tilt / Roll</text>
    <text x="800" y="335" text-anchor="middle" fill="#a7f3d0" font-family="Arial, sans-serif" font-size="9">Dolly / Truck / Crane</text>
    <text x="800" y="352" text-anchor="middle" fill="#6ee7b7" font-family="Arial, sans-serif" font-size="9">Motion classification:</text>
    <text x="800" y="369" text-anchor="middle" fill="#34d399" font-family="Arial, sans-serif" font-size="8">handheld/tripod/drone/orbit</text>
  </g>

  <!-- Arrow from Camera Extractor to Motion -->
  <path d="M 800 230 L 800 270" stroke="#34d399" stroke-width="2" fill="none"/>
  <polygon points="800,270 796,262 804,262" fill="#34d399"/>

  <!-- Scene Combiner -->
  <g filter="url(#shadow)">
    <rect x="710" y="430" width="180" height="100" rx="8" fill="url(#combineGrad)"/>
    <text x="800" y="458" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ¬ Scene Combiner</text>
    <text x="800" y="478" text-anchor="middle" fill="#d1fae5" font-family="Arial, sans-serif" font-size="9">Camera + Body Mesh</text>
    <text x="800" y="495" text-anchor="middle" fill="#a7f3d0" font-family="Arial, sans-serif" font-size="9">Align coordinates</text>
    <text x="800" y="512" text-anchor="middle" fill="#6ee7b7" font-family="Arial, sans-serif" font-size="9">Scale &amp; center scene</text>
    <text x="800" y="525" text-anchor="middle" fill="#34d399" font-family="Arial, sans-serif" font-size="9">â†’ COMBINED_SCENE</text>
  </g>

  <!-- Arrow from Motion to Scene Combiner -->
  <path d="M 800 380 L 800 430" stroke="#34d399" stroke-width="2" fill="none"/>
  <polygon points="800,430 796,422 804,422" fill="#34d399"/>

  <!-- Arrow from SAM3D to Scene Combiner -->
  <path d="M 450 530 L 580 530 L 580 480 L 710 480" stroke="#a78bfa" stroke-width="2" fill="none"/>
  <polygon points="710,480 702,476 702,484" fill="#a78bfa"/>

  <!-- Export Nodes -->
  <!-- JSON/CSV Export -->
  <g filter="url(#shadow)">
    <rect x="950" y="140" width="160" height="70" rx="8" fill="url(#exportGrad)"/>
    <text x="1030" y="165" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ’¾ Camera Exporter</text>
    <text x="1030" y="185" text-anchor="middle" fill="#fecaca" font-family="Arial, sans-serif" font-size="9">JSON / CSV / OpenCV</text>
    <text x="1030" y="200" text-anchor="middle" fill="#fca5a5" font-family="Arial, sans-serif" font-size="9">Nuke .chan</text>
  </g>

  <!-- Alembic Export -->
  <g filter="url(#shadow)">
    <rect x="950" y="230" width="160" height="70" rx="8" fill="url(#exportGrad)"/>
    <text x="1030" y="255" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ“¦ Alembic Export</text>
    <text x="1030" y="275" text-anchor="middle" fill="#fecaca" font-family="Arial, sans-serif" font-size="9">Camera animation</text>
    <text x="1030" y="290" text-anchor="middle" fill="#fca5a5" font-family="Arial, sans-serif" font-size="9">.abc file</text>
  </g>

  <!-- FBX Export -->
  <g filter="url(#shadow)">
    <rect x="950" y="320" width="160" height="70" rx="8" fill="url(#exportGrad)"/>
    <text x="1030" y="345" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ® FBX Export</text>
    <text x="1030" y="365" text-anchor="middle" fill="#fecaca" font-family="Arial, sans-serif" font-size="9">Camera + optional mesh</text>
    <text x="1030" y="380" text-anchor="middle" fill="#fca5a5" font-family="Arial, sans-serif" font-size="9">.fbx file</text>
  </g>

  <!-- Combined Scene Export -->
  <g filter="url(#shadow)">
    <rect x="950" y="430" width="160" height="100" rx="8" fill="url(#exportGrad)"/>
    <text x="1030" y="458" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">ğŸ¬ Scene Export</text>
    <text x="1030" y="478" text-anchor="middle" fill="#fecaca" font-family="Arial, sans-serif" font-size="9">Camera + Body Mesh</text>
    <text x="1030" y="495" text-anchor="middle" fill="#fca5a5" font-family="Arial, sans-serif" font-size="9">Alembic / FBX / USD</text>
    <text x="1030" y="520" text-anchor="middle" fill="#f87171" font-family="Arial, sans-serif" font-size="8">Ready for Blender/Maya/Houdini</text>
  </g>

  <!-- Arrows to exports -->
  <path d="M 890 185 L 950 175" stroke="#34d399" stroke-width="2" fill="none"/>
  <path d="M 890 325 L 920 325 L 920 265 L 950 265" stroke="#34d399" stroke-width="2" fill="none"/>
  <path d="M 890 325 L 920 325 L 920 355 L 950 355" stroke="#34d399" stroke-width="2" fill="none"/>
  <path d="M 890 480 L 950 480" stroke="#34d399" stroke-width="2" fill="none"/>
  <polygon points="950,480 942,476 942,484" fill="#34d399"/>

  <!-- Legend -->
  <rect x="50" y="620" width="1100" height="150" rx="8" fill="#262640" stroke="#4b5563" stroke-width="1"/>
  <text x="600" y="650" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Data Types &amp; Motion Analysis</text>
  
  <!-- Data Types -->
  <rect x="80" y="670" width="15" height="15" fill="#3b82f6"/>
  <text x="105" y="682" fill="#9ca3af" font-family="Arial, sans-serif" font-size="11">IMAGE - Video frames batch</text>
  
  <rect x="80" y="695" width="15" height="15" fill="#f59e0b"/>
  <text x="105" y="707" fill="#9ca3af" font-family="Arial, sans-serif" font-size="11">COLMAP_DATABASE - Features &amp; matches</text>
  
  <rect x="80" y="720" width="15" height="15" fill="#10b981"/>
  <text x="105" y="732" fill="#9ca3af" font-family="Arial, sans-serif" font-size="11">CAMERA_DATA - Intrinsics, extrinsics, motion</text>
  
  <rect x="80" y="745" width="15" height="15" fill="#8b5cf6"/>
  <text x="105" y="757" fill="#9ca3af" font-family="Arial, sans-serif" font-size="11">MESH_SEQUENCE - Body mesh per frame</text>

  <!-- Motion Types -->
  <text x="450" y="682" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Motion Types Detected:</text>
  <text x="450" y="707" fill="#9ca3af" font-family="Arial, sans-serif" font-size="10">ğŸ”„ Pan (horizontal) | Tilt (vertical) | Roll</text>
  <text x="450" y="727" fill="#9ca3af" font-family="Arial, sans-serif" font-size="10">â¡ï¸ Dolly (forward/back) | Truck (left/right) | Crane (up/down)</text>
  <text x="450" y="747" fill="#9ca3af" font-family="Arial, sans-serif" font-size="10">ğŸ¯ Static | Handheld | Tripod | Drone | Orbit | Tracking</text>

  <!-- Coordinate Systems -->
  <text x="820" y="682" fill="#ffffff" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Coordinate Systems:</text>
  <text x="820" y="707" fill="#9ca3af" font-family="Arial, sans-serif" font-size="10">Blender | Unreal | Unity | Maya</text>
  <text x="820" y="727" fill="#9ca3af" font-family="Arial, sans-serif" font-size="10">OpenGL | OpenCV | Houdini | USD</text>
  <text x="820" y="747" fill="#9ca3af" font-family="Arial, sans-serif" font-size="10">COLMAP native | Custom matrix</text>
</svg>
